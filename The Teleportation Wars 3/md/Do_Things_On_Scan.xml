<?xml version="1.0" encoding="utf-8"?>
<mdscript name="Do_Things_On_Scan" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="E:/Mod Stuff/X4 Extracted/2.0beta/libraries/md.xsd">
    <cues>
        <cue name="Do_Things_On_Scan_Start" instantiate="true" checkinterval="5s">
            <!-- <conditions>
                <event_long_range_scan_sent object="player.entity" />
            </conditions> -->
            <actions>
                <create_list name="$Effects" />
                <append_to_list name="$Effects" exact="'beam_player_impact'" />
                <append_to_list name="$Effects" exact="'beam_v2_player_impact'" />
                <append_to_list name="$Effects" exact="'mg_player_impact'" />
                <append_to_list name="$Effects" exact="'shotgun_player_impact'" />
                <append_to_list name="$Effects" exact="'missile_player_torpedo_explosion'" />
                <append_to_list name="$Effects" exact="'missile_player_limpetmine_explosion'" />
                <append_to_list name="$Effects" exact="'plasmaemitter_player_impact'" />
                <append_to_list name="$Effects" exact="'boostfx_engine_player_01'" />
                <append_to_list name="$Effects" exact="'missile_player_dumbfire_explosion'" />
                <append_to_list name="$Effects" exact="'missile_player_guided_explosion'" />
                <append_to_list name="$Effects" exact="'missile_emp_player_explosion'" />
                <append_to_list name="$Effects" exact="'hept_player_impact'" />

                <set_value name="$SelectedEffect" exact="$Effects.random"/>
                <add_effect effect="$SelectedEffect" object="player.ship"></add_effect>
                <show_notification text="$SelectedEffect" />
            
                <!-- <add_effect object="player.zone" effect="'hq_warpin'">
                </add_effect> -->
                <!-- <add_effect object="player.ship" effect="player.ship.beam_player_impact">
                </add_effect>
                <add_effect object="player.ship" effect="'beam_player_impact'">
                </add_effect> -->
                <!-- <add_effect object="player.ship" effect="'plasmaemitter_player_impact'">
                </add_effect> -->
                <!-- <add_effect object="player.ship" effect="'missile_player_swarm_explosion'">
                </add_effect> -->
                <!-- <add_effect object="player.ship" effect="'dmgfx_cockpit_impact_inside_lightning_01'">
                </add_effect> -->
                
                <!-- <add_faction_relation faction="faction.player" otherfaction="faction.argon" value="30"/> -->
                <!-- <add_licence faction="faction.player" licencefaction="faction.argon" type="ceremonyally"/>
                    <add_licence faction="faction.player" licencefaction="faction.argon" type="capitalship"/>
                    <add_licence faction="faction.player" licencefaction="faction.argon" type="capitalequipment"/>
                    <add_licence faction="faction.player" licencefaction="faction.argon" type="militaryequipment"/>
                    <add_licence faction="faction.player" licencefaction="faction.argon" type="militaryship"/>
                    <add_licence faction="faction.player" licencefaction="faction.argon" type="capitalship"/> -->
                <!-- <do_all exact="1"> -->
                <!-- <create_ship name="$Leader" zone="player.zone" macro="macro.ship_arg_s_fighter_04_a_macro"> -->
                <!-- <create_ship name="$Leader" zone="player.zone" >
                                <select faction="faction.pirate" tags="[tag.carrierpirate]" />
                                <owner exact="faction.player" overridenpc="true"/>
                                <loadout>
                                    <level exact="1.0"/>
                                </loadout>
                                <pilot>
                                    <select race="race.xenon" tags="tag.aipilot"/>
                                </pilot> -->
                <!-- <select faction="faction.pirate" tags="[tag.fighterpirate]" />
                                    <pilot>
                                        <select race="race.xenon" tags="tag.aipilot"/>
                                    </pilot>
                                    <owner exact="faction.player" overridenpc="true"/>
                                    <loadout ref="TP_War_Fighter_Missile_Test"/> -->
                <!-- </create_ship>
                            <set_object_commander object="$Leader" commander="$Leader"/> -->
                            <!-- <do_all exact="40">
                                <create_ship name="$Follower" zone="player.zone" macro="macro.ship_arg_s_fighter_04_a_macro">
                                    <select faction="faction.pirate" tags="[tag.fighterpirate]" />
                                    <pilot>
                                        <select race="race.xenon" tags="tag.aipilot"/>
                                    </pilot>
                                    <owner exact="faction.player" overridenpc="true"/>
                                    <loadout ref="TP_War_Fighter_Missile_Test"/>
                                    <safepos object="$Leader" max="2km"/>
                                </create_ship>
                                <set_object_commander object="$Follower" commander="$Leader"/>
                            </do_all>   -->
                <!-- <do_all exact="16">
                                <create_ship name="$Follower" zone="player.zone" >
                                    <select faction="faction.pirate" tags="[tag.destroyerpirate]" />
                                    <pilot>
                                        <select race="race.xenon" tags="tag.aipilot"/>
                                    </pilot>
                                    <owner exact="faction.player" overridenpc="true"/>
                                    <loadout>
                                        <level exact="1.0"/>
                                    </loadout>                                    
                                    <safepos object="$Leader" max="2km"/>
                                </create_ship>
                                <set_object_commander object="$Follower" commander="$Leader"/>
                            </do_all>
                            <do_all exact="40">
                                <create_ship name="$Follower" zone="player.zone" macro="macro.ship_arg_s_fighter_04_a_macro">
                                    <select faction="faction.pirate" tags="[tag.fighterpirate]" />
                                    <pilot>
                                        <select race="race.xenon" tags="tag.aipilot"/>
                                    </pilot>
                                    <owner exact="faction.player" overridenpc="true"/>
                                    <loadout ref="TP_War_Fighter_Missile_Test"/>                                    
                                    <safepos object="$Leader" max="2km"/>
                                </create_ship>
                                <set_object_commander object="$Follower" commander="$Leader"/>
                            </do_all>                               -->
                <!-- <add_cargo object="$Leader" ware="ware.missilecomponents" exact="1000"/> -->
                <!-- <add_cargo object="$Leader" ware="ware.antimattercells" exact="10"/> -->
                <!-- <add_cargo object="$Leader" ware="ware.fieldcoils" exact="50"/> -->
                <!-- PLAYER SHIPS TO SPAWN -->
                <!-- 1 CARRIER -->
                <!-- <do_all exact="1">
                            <create_ship name="$Leader" sector="player.sector" groupname="$PlayerShips">
                                <select faction="pirate" tags="[tag.carrierpirate]" />
                                <owner exact="faction.player" overridenpc="true"/>
                                <loadout>
                                    <level exact="1.0"/>
                                </loadout>
                            </create_ship>
                            <set_object_commander object="$Leader" commander="$Leader"/>
                            <create_order id="'Patrol'" object="$Leader" default="true">
                                <param name="space" value="player.sector"/>
                            </create_order>
                        </do_all> -->
                <!-- 40 FIGHTERS -->
                <!-- <do_all exact="1">
                            <create_ship name="$Leader" sector="player.sector" groupname="$PlayerShips">
                                <select faction="faction.pirate" tags="[tag.carrierpirate]" />
                                <owner exact="faction.pirate" overridenpc="true"/>
                                <loadout>
                                    <level exact="1.0"/>
                                </loadout>
                                <position x="3000m" y="-2500m" z="20000m"/>
                            </create_ship>
                            <set_object_commander object="$Leader" commander="$Leader"/>
                            <create_order id="'Patrol'" object="$Leader" default="true">
                                <param name="space" value="player.sector"/>
                            </create_order>
                        </do_all> -->
                <!-- <do_all exact="1">
                            <create_ship name="$Destroyer" sector="player.sector" groupname="$PlayerShips">
                                <select faction="faction.pirate" tags="[tag.destroyerpirate]" />
                                <owner exact="faction.player" overridenpc="true"/>
                                <loadout>
                                    <level exact="1.0"/>
                                </loadout>
                            </create_ship> -->
                <!-- <set_object_commander object="$Destroyer" commander="$Leader"/> -->
                <!-- <create_order id="'Escort'" object="$Destroyer" default="true">
                                <param name="target" value="$Leader"/>
                                <param name="formation" value="formationshape.pointguard"/>
                                <param name="formationparam" value="200m"/>
                            </create_order> -->
                <!-- </do_all>     -->
                <!-- <find_object_component groupname="$ShipWares" object="$Destroyer" multiple="true" class="class.turret" includeobjects="true"/>
                            <create_list name="$ShipWaresMacros"/>
                            <do_all exact="$ShipWares.count" counter="$s">
                                <append_to_list name="$ShipWaresMacros" exact="$ShipWares.{$s}.macro"/>
                            </do_all>
                            <debug_text text="'Destroyer Macros ' + $ShipWaresMacros"/> -->
                <!-- <do_all exact="40">
                            <create_ship name="$Fighter" sector="player.sector" groupname="$PlayerShips">
                                <select faction="faction.pirate" tags="[tag.fighterpirate]" />
                                <owner exact="$Leader.owner" overridenpc="true"/>
                                <loadout>
                                    <level exact="1.0"/>
                                </loadout>
                                <safepos object="$Leader" min="300" max="5km"/>
                            </create_ship>
                            <set_object_commander object="$Fighter" commander="$Leader"/>
                            <create_order id="'Escort'" object="$Fighter" default="true">
                                <param name="target" value="$Leader"/>
                                <param name="formation" value="formationshape.pointguard"/>
                                <param name="formationparam" value="200m"/>
                            </create_order>
                        </do_all> -->
                <!-- PIRATE SHIPS TO FIGHT -->
                <!-- 1 CARRIER -->
                <!-- <do_all exact="1">
                            <create_ship name="$Leader" sector="player.sector" groupname="$PlayerShips">
                                <select faction="pirate" tags="[tag.carrierpirate]" />
                                <owner exact="faction.player" overridenpc="true"/>
                                <loadout>
                                    <level exact="1.0"/>
                                </loadout>
                            </create_ship>
                            <set_object_commander object="$Leader" commander="$Leader"/>
                            <create_order id="'Patrol'" object="$Leader" default="true">
                                <param name="space" value="player.sector"/>
                            </create_order>
                        </do_all>-->
                <!-- <do_all exact="1">
                            <create_ship name="$PLeader" zone="player.zone" groupname="$PlayerShips">
                                <select faction="faction.pirate" tags="[tag.carrierpirate]" />
                                <owner exact="faction.player" overridenpc="true"/>
                                <loadout>
                                    <level exact="1.0"/>
                                </loadout>
                                <position x="3000m" y="-2500m" z="-20000m"/>
                            </create_ship>
                            <set_object_commander object="$PLeader" commander="$PLeader"/>
                            <create_order id="'Patrol'" object="$PLeader" default="true">
                                <param name="space" value="$PLeader.sector"/>
                            </create_order>
                        </do_all>
                         <do_all exact="5">
                            <create_ship name="$PDestroyer" zone="player.zone" groupname="$PlayerShips">
                                <select faction="faction.pirate" tags="[tag.destroyerpirate]" />
                                <owner exact="$PLeader.owner" overridenpc="true"/>
                                <loadout>
                                    <level exact="1.0"/>
                                </loadout>
                                <safepos object="$PLeader" min="300" max="5km"/>
                            </create_ship>
                            <set_object_commander object="$PDestroyer" commander="$PLeader"/>
                            <create_order id="'Escort'" object="$PDestroyer" default="true">
                                <param name="target" value="$PLeader"/>
                                <param name="formation" value="formationshape.pointguard"/>
                                <param name="formationparam" value="200m"/>
                            </create_order>
                        </do_all>
                         <do_all exact="40">
                            <create_ship name="$PFighter" zone="player.zone" groupname="$PlayerShips">
                                <select faction="faction.pirate" tags="[tag.fighterpirate]" />
                                <owner exact="$PLeader.owner" overridenpc="true"/>
                                <loadout>
                                    <level exact="1.0"/>
                                </loadout>
                                <safepos object="$PLeader" min="300" max="5km"/>
                            </create_ship>
                            <set_object_commander object="$PFighter" commander="$PLeader"/>
                            <create_order id="'Escort'" object="$PFighter" default="true">
                                <param name="target" value="$PLeader"/>
                                <param name="formation" value="formationshape.pointguard"/>
                                <param name="formationparam" value="200m"/>
                            </create_order>
                        </do_all> -->
                <!-- set known and take ownership -->
                <!-- <find_station name="$AllPirateships" space="player.sector" owner="faction.player" multiple="true"/> -->
                <!-- <find_ship name="$AllPirateships" space="player.galaxy" owner="faction.meditech" multiple="true"/> -->
                <!-- <do_all exact="$AllPirateships.count" counter="$Counter">
                        <set_owner object="$AllPirateships.{$Counter}" overridenpc="true" faction="faction.argon"/>
                    <set_known object="$AllPirateships.{$Counter}" known="true"/> 
                    <set_known object="$AllPirateships.{$Counter}.zone" known="true"/>
                    <set_known object="$AllPirateships.{$Counter}.sector" known="true"/>
                    <set_known object="$AllPirateships.{$Counter}.cluster" known="true"/> 
                </do_all> -->

                <!-- list out all ships in game -->
                <!-- <find_ship name="$AllPirateships" space="player.galaxy" multiple="true"/>
                <do_all exact="$AllPirateships.count" counter="$count">
                    <debug_text text="'Test ' + $AllPirateships.{$count}.controlentity.default + ' ' + $AllPirateships.{$count} + ' ' + $AllPirateships.{$count}.pilot + ' ' +  $AllPirateships.{$count}.knownname + ' ' + $AllPirateships.{$count}.sector.knownname" />
                </do_all> -->

                <!-- table within a table test -->
                <!-- <find_ship name="$AllPirateships" space="player.galaxy" owner="faction.argon" multiple="true" />

                <set_value name="global.$PirateShipTablea" exact="table[]" />
                <do_all exact="$AllPirateships.count" counter="$count">
                    <set_value name="$ShipMacro" exact="$AllPirateships.{$count}.macro" />
                    <set_value name="$ShipZone" exact="$AllPirateships.{$count}.zone" />
                    <set_value name="global.$PirateShipTablea.{$AllPirateships.{$count}}" exact="table[
                        $macro = $ShipMacro,
                        $zone = $ShipZone]" />
                    <remove_value name="$ShipMacro" />
                    <remove_value name="$ShipZone" />                  
                </do_all>
                <debug_text text="global.$PirateShipTablea.{$AllPirateships.{2}}.$macro" />
                <debug_text text="global.$PirateShipTablea.{$AllPirateships.{2}}.$zone" />
                <debug_text text="global.$PirateShipTablea.{$AllPirateships.{2}}" />
                <debug_text text="global.$PirateShipTablea.{$AllPirateships.{2}}.keys.list" /> -->
                <!-- <debug_text text="global.$PirateShipTablea.keys.list.{2}.$macro" />
                <debug_text text="global.$PirateShipTablea.keys.list.{2}.$zone" />
                <debug_text text="global.$PirateShipTablea.keys.list.{2}" />
                <debug_text text="global.$PirateShipTablea.keys.list.{2}.keys.list" /> -->
                <!-- <debug_text text="global.$PirateShipTablea" />
                <debug_text text="global.$PirateShipTablea.keys.list" />




                <set_value name="global.$PirateShipTable" exact="global.$PirateShipTablea" />
                 -->
                
                <!-- <do_all exact="$AllPirateships.count" counter="$count">
                    <set_value name="global.$PirateShipTable.{$AllPirateships.{$count}}" exact="table[
                        $macro = {$AllPirateships.{$count}}.macro,
                        $zone = {$AllPirateships.{$count}.zone}]" />
                </do_all> -->

                <!-- <debug_text text="global.$PirateShipTable.{$AllPirateships.{2}}.$macro" />
                <debug_text text="global.$PirateShipTable.{$AllPirateships.{2}}.$zone" />
                <debug_text text="global.$PirateShipTable.{$AllPirateships.{2}}" />
                <debug_text text="global.$PirateShipTable.{$AllPirateships.{2}}.keys.list" /> -->
                <!-- <debug_text text="global.$PirateShipTable.keys.list.{2}.$macro" />
                <debug_text text="global.$PirateShipTable.keys.list.{2}.$zone" />
                <debug_text text="global.$PirateShipTable.keys.list.{2}" />
                <debug_text text="global.$PirateShipTable.keys.list.{2}.keys.list" /> -->
                <!-- <debug_text text="global.$PirateShipTable" />
                <debug_text text="global.$PirateShipTable.keys.list" /> -->




                <!-- <do_all exact="$AllPirateships.count" counter="$count">
                    <set_value name="global.$PirateShipTable2" exact="table[
                        {$AllPirateships.{$count}} = table[]" />
                    <set_value name="global.$PirateShipTable2.{$AllPirateships.{$count}}" exact="table[ 
                            $macro = $AllPirateships.{$count}.macro,
                            $zone = $AllPirateships.{$count}.zone
                            ]" />
                </do_all>
                <debug_text text="global.$PirateShipTable2.{$AllPirateships.{2}}.$macro" />
                <debug_text text="global.$PirateShipTable2.{$AllPirateships.{2}}.$zone" />
                <debug_text text="global.$PirateShipTable2.{$AllPirateships.{2}}" />
                <debug_text text="global.$PirateShipTable2.{$AllPirateships.{2}}.keys.list" />
                <debug_text text="global.$PirateShipTable2" />
                <debug_text text="global.$PirateShipTable2.keys.list" />

                <do_all exact="$AllPirateships.count" counter="$count">
                    
                    <set_value name="global.$PirateShipTable3" exact="table[
                        $test = table[]
                        ]" />
                    <set_value name="global.$PirateShipTable3.$test" exact="table[
                        $macro = $AllPirateships.{$count}.macro,
                        $zone = $AllPirateships.{$count}.zone
                        ]" />
                </do_all>
                <debug_text text="global.$PirateShipTable3.$test.$macro" />
                <debug_text text="global.$PirateShipTable3.$test.$zone" />
                <debug_text text="global.$PirateShipTable3.$test" />
                <debug_text text="global.$PirateShipTable3.$test.keys.list" />
                <debug_text text="global.$PirateShipTable3" />
                <debug_text text="global.$PirateShipTable3.keys.list" /> -->


                <!-- <create_list name="$NewSectors" />
                <append_to_list name="$NewSectors" exact="macro.tpthree_zone001_cluster110_sector001_macro" />
                <append_to_list name="$NewSectors" exact="macro.tpthree_zone001_cluster217_sector001_macro" />
                <append_to_list name="$NewSectors" exact="macro.tpthree_zone001_cluster307_sector001_macro" />
                <append_to_list name="$NewSectors" exact="macro.tpthree_zone001_cluster393_sector001_macro" /> -->

                <!-- <find_sector groupname="$NewSectors" multiple="true" space="player.galaxy"></find_sector>
                <warp object="player.ship" zone="$NewSectors.random"></warp> -->

            </actions>
        </cue>
    </cues>
</mdscript>